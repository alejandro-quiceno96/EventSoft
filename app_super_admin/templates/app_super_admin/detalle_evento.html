{% extends 'app_super_admin/base.html' %}
{% load static %}

{% block title %}Información del Evento{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<div class="header"
    style="background-color: #007832; color: white; padding: 20px; text-align: center; font-size: 32px; font-weight: bold;">
    Información del Evento
</div>

<div class="container"
    style="display: flex; justify-content: center; align-items: center; padding: 20px; flex-direction: column;">
    
    <div class="info-section d-flex flex-wrap"
        style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0px 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 1000px;">

        <!-- Imagen -->
        <div class="col-md-6" style="padding-right: 15px;">
            {% if evento.eve_imagen %}
            <img src="{{ evento.eve_imagen.url }}" alt="Imagen del evento"
                style="width: 100%; height: 100%; max-height: 400px; object-fit: cover; border-radius: 10px;">
            {% elif evento.imagen_url %}
            <img src="{{ evento.imagen_url }}" alt="Imagen del evento"
                style="width: 100%; height: 100%; max-height: 400px; object-fit: cover; border-radius: 10px;">
            {% else %}
            <div style="width: 100%; height: 300px; background: #eee; display: flex; align-items: center; justify-content: center; border-radius: 10px;">
                <span class="text-muted">Sin imagen</span>
            </div>
            {% endif %}
        </div>

        <!-- Información -->
        <div class="col-md-6" style="padding-left: 15px;">
            <h2 class="mb-3">{{ evento.eve_nombre|default:"Evento no asignado" }}</h2>

            <h5 class="text-muted mb-3">
                Organizado por {{ evento.eve_administrador_fk.usuario.first_name }} {{ evento.eve_administrador_fk.usuario.last_name }}
            </h5>

            {% if evento.eve_descripcion %}
            <p><strong>Descripción:</strong> {{ evento.eve_descripcion }}</p>
            {% endif %}

            <p>
                El evento se realizará el
                <strong>{{ evento.eve_fecha_inicio|default:"fecha por definir" }}</strong>,
                en <strong>{{ evento.eve_lugar|default:"lugar por definir" }}</strong>
                {% if evento.eve_ciudad %}, {{ evento.eve_ciudad }}{% endif %}.
            </p>

            <ul class="list-unstyled mt-3">
                {% if evento.eve_fecha_fin %}
                <li><i class="bi bi-calendar-event-fill"></i> <strong>Fecha fin:</strong> {{ evento.eve_fecha_fin }}</li>
                {% endif %}
                {% if evento.eve_estado %}
                <li><i class="bi bi-flag-fill"></i> <strong>Estado:</strong> {{ evento.eve_estado }}</li>
                {% endif %}
                {% if evento.eve_capacidad %}
                <li><i class="bi bi-people-fill"></i> <strong>Capacidad:</strong> {{ evento.eve_capacidad }}</li>
                {% endif %}
                {% if evento.eve_programacion %}
                <li><i class="bi bi-file-earmark-text-fill"></i> <strong>Programación:</strong>
                    <a href="{{ evento.eve_programacion.url }}" class="btn-ver-mas btn btn-outline-success btn-sm ms-2" target="_blank">Ver programación</a>
                </li>
                {% endif %}
            </ul>
            
            <div class="mt-4 d-flex gap-2">
              {% if evento.eve_estado != "Cancelado" %}
                <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#modalCancelarEvento">
                    Cancelar evento
                </button>
              {% else %}
                <button class="btn btn-ver-mas" data-bs-toggle="modal" data-bs-target="#modalActivarEvento">
                    Activar Evento
                </button>
              {% endif %}
              <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalEliminarEvento">
                  Eliminar evento
              </button>
          </div>
          

        </div>
        
    </div>

    <div class="btn-container">
        <a href="{% url 'super_admin:index_super_admin' %}" class="open-menu-btn"
            style="position: fixed; top: 10px; left: 20px; background: white; color: #007832; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-size: 16px; z-index: 1000;">
            Volver
        </a>
    </div>
</div>

<!-- Modal Cancelar Evento -->
<div class="modal fade" id="modalCancelarEvento" tabindex="-1" aria-labelledby="cancelarEventoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-warning">
        <h5 class="modal-title" id="cancelarEventoLabel">Cancelar evento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        ¿Estás seguro de que deseas cancelar este evento? Esta acción no eliminará el evento pero lo marcará como cancelado.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
        <a href="{% url 'super_admin:cancelar_evento' evento.id %}" class="btn btn-warning">Sí, cancelar</a>
      </div>
    </div>
  </div>
</div>

<!-- Modal Activar Evento -->
<div class="modal fade" id="modalActivarEvento" tabindex="-1" aria-labelledby="cancelarEventoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="cancelarEventoLabel">Activar Evento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        ¿Estás seguro de que deseas Activar este evento? Esta acción volverá a mostrar este evento en la web.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
        <a href="{% url 'super_admin:modificar_eventos' evento.id 'activo' %}" class="btn btn-ver-mas " style="width: 150px;">Sí, Activar</a>
      </div>
    </div>
  </div>
</div>

<!-- Modal Eliminar Evento -->
<div class="modal fade" id="modalEliminarEvento" tabindex="-1" aria-labelledby="eliminarEventoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="eliminarEventoLabel">Eliminar evento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        ⚠ Esta acción eliminará el evento de forma permanente. ¿Deseas continuar?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <a href="{% url 'super_admin:eliminar_evento' evento.id %}" class="btn btn-danger">Sí, eliminar</a>
      </div>
    </div>
  </div>
</div>




{% endblock %}
